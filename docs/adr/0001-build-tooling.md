# ADR 0001: Bootstrap Tooling, Formatting, and Static Analysis

## Status
Accepted – 2026-01-10

## Context
Building TextMate requires several Homebrew-managed dependencies and bespoke configuration generated by `bin/rave`. Historically, developers manually installed packages, invoked `./configure`, and handled formatting or static analysis ad hoc. This led to inconsistent local environments, limited automation, and no shared source of truth for code style or linting.

## Decision
1. Check in a `Brewfile` describing the Homebrew dependencies shared by local development and CI.
2. Provide `scripts/bootstrap.sh` to automate dependency installation, submodule sync, Ninja generation, compilation database emission, and (when available) pre-commit hook installation.
3. Adopt project-wide `.clang-format`, `.clang-tidy`, and `.editorconfig` files to codify formatting and linting defaults.
4. Introduce `.pre-commit-config.yaml` with hooks for clang-format, clang-tidy, and baseline hygiene checks so contributors get fast feedback locally and in CI.
5. Update GitHub Actions to rely on the bootstrap workflow, cache Homebrew assets, and execute the pre-commit suite on every push and pull request.

## Consequences
- New contributors can run a single script to prepare the project and receive consistent tooling hints.
- Automated formatting and static analysis eliminate class of style-only review comments and surface modern C++ guidance early.
- CI results now reflect the same checks executed locally, reducing “works on my machine” drift.
- The compilation database enables richer editor integrations (clangd, clang-tidy) without manual setup.
- Developers must have LLVM tools (from Homebrew) on their PATH; the bootstrap script prints hints and CI ensures availability.
